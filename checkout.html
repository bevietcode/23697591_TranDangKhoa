<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Thanh To√°n</title>
  <link rel="stylesheet" href="css/bootstrap.min.css">
</head>
<body>
  <div class="container my-5">
    <h3 class="mb-4">Th√¥ng tin thanh to√°n</h3>

    <div class="border p-3 mb-4">
      <h5>S·∫£n ph·∫©m trong gi·ªè:</h5>
      <ul id="orderSummary" class="list-group mb-2"></ul>
      <p class="fw-bold">T·ªïng ti·ªÅn: <span id="totalAmount">0‚Ç´</span></p>
    </div>

    <form id="shippingForm">
      <div class="mb-3">
        <label for="fullName" class="form-label">H·ªç t√™n</label>
        <input type="text" class="form-control" id="fullName" required>
      </div>
      <div class="mb-3">
        <label for="phone" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
        <input type="tel" class="form-control" id="phone" pattern="^\d{10,}$" required title="S·ªë ƒëi·ªán tho·∫°i ph·∫£i c√≥ √≠t nh·∫•t 10 ch·ªØ s·ªë">
      </div>
      <div class="mb-3">
        <label for="address" class="form-label">ƒê·ªãa ch·ªâ giao h√†ng</label>
        <textarea class="form-control" id="address" rows="3" required></textarea>
      </div>
      <button type="submit" class="btn btn-success">X√°c nh·∫≠n thanh to√°n</button>
    </form>
      <!-- N√∫t quay v·ªÅ trang ch·ªß -->
    <div class="mt-4">
      <a href="index.html" class="btn btn-secondary">‚Üê Quay v·ªÅ trang ch·ªß</a>
    </div>
  </div>



  <script>
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const orderSummary = document.getElementById("orderSummary");
    const totalAmount = document.getElementById("totalAmount");
  
    let total = 0;
    cart.forEach(item => {
      const li = document.createElement("li");
      li.className = "list-group-item d-flex justify-content-between align-items-center";
      li.textContent = `${item.name} x ${item.quantity}`;
      const price = document.createElement("span");
      price.className = "fw-bold";
      price.textContent = `${(item.quantity * item.price).toLocaleString('vi-VN')}‚Ç´`;
      li.appendChild(price);
      orderSummary.appendChild(li);
      total += item.quantity * item.price;
    });

    
  
    totalAmount.textContent = total.toLocaleString('vi-VN') + "‚Ç´";
  
    // X·ª≠ l√Ω form thanh to√°n
    document.getElementById("shippingForm").addEventListener("submit", function(event) {
      event.preventDefault(); // NgƒÉn g·ª≠i form th·∫≠t
      
      const phone = document.getElementById("phone").value;

      if (!/^\d{10,}$/.test(phone)) {
        alert("S·ªë ƒëi·ªán tho·∫°i ph·∫£i c√≥ √≠t nh·∫•t 10 ch·ªØ s·ªë!");
        return;
      }
      // Gi·∫£ l·∫≠p x·ª≠ l√Ω thanh to√°n
      alert("üéâ Thanh to√°n th√†nh c√¥ng! C·∫£m ∆°n b·∫°n ƒë√£ mua h√†ng.");
  
      // X√≥a gi·ªè h√†ng
      localStorage.removeItem("cart");
  
      // Chuy·ªÉn v·ªÅ trang ch·ªß sau 1 gi√¢y (tu·ª≥ ch·ªçn)
      setTimeout(() => {
        window.location.href = "index.html";
      }, 1000);
    });
  </script>
  
</body>
</html>
